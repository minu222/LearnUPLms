<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>DW Academy</title>
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
            rel="stylesheet"
    />
    <link rel="stylesheet" th:href="@{/adminpages/css/style.css}">
    <link rel="stylesheet" th:href="@{/adminpages/css/menu.css}">
</head>

<body>
<div th:replace="adminpages/menu :: menu"></div>
      <main class="main">
        <div class="content-box">
          <h2>자료 관리</h2>

            <!-- 검색/업로드 -->
            <div class="search-box materials-search">
                <form th:action="@{/admin/course-materials-management}" method="get" style="display:inline;">
                    <input type="text" name="q" placeholder="강의실명" th:value="${param.q}" />
                    <button class="btn-search" type="submit">조회</button>
                </form>
            </div>

          <table class="data-table materials-table" aria-label="수업 자료 목록">
            <colgroup>
              <col class="no" />
              <col class="name" />
              <col class="date" />
              <col class="action" />
            </colgroup>
              <thead>
              <tr>
                  <th>NO</th>
                  <th>강의실명</th>
                  <th>파일경로</th>
                  <th>다운로드</th>
              </tr>
              </thead>
              <tbody>
              <tr th:each="material, i : ${materials}">
                  <td th:text="${i.index + 1}">1</td>
                  <td>
                      <a th:href="@{/admin/course-materials/{id}/view(id=${material.materialId})}" th:text="${material.courseTitle}"></a>
                  </td>
                  <td th:text="${material.filePath}"></td>
                  <td>
                      <a th:href="@{/admin/course-materials/{id}/download(id=${material.materialId})}">다운로드</a>
                      <form th:action="@{/admin/course-materials/{id}/delete(id=${material.materialId})}" method="post" style="display:inline;">
                          <button type="submit" onclick="return confirm('삭제하시겠습니까?')">삭제</button>
                      </form>
                  </td>
              </tr>
              <tr th:if="${#lists.isEmpty(materials)}">
                  <td colspan="4">등록된 자료가 없습니다.</td>
              </tr>
              </tbody>
          </table>
        </div>
      </main>
    </div>
  </body>
</html>
